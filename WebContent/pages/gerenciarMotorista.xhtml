<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:of="http://omnifaces.org/functions"
                template="/WEB-INF/template/padrao.xhtml">
	
	<ui:define name="title">
		<p:outputPanel id="pnlSubtitulo">
			<h:outputText value="Gerenciar Motoristas"/>
			<small>#{gerenciarMotoristaBack.subtitulo}</small>
		</p:outputPanel>    
	</ui:define>

	<ui:define name="body">

		<p:panel styleClass="box-primary">

			<div class="text-right">
				<p:commandButton value="Adicionar Novo Valor" icon="fa fa-plus" 
						styleClass="btn-primary btn-sm" actionListener="#{gerenciarMotoristaBack.colocarEmModoDeCadastro()}"
						update="pnlSubtitulo, pnlGerenciarMotorista"/>
				<p:commandButton value="Localizar Valor Existente" icon="fa fa-search" 
						styleClass="btn-primary btn-sm" actionListener="#{gerenciarMotoristaBack.colocarEmModoDeListagem()}"
						update="pnlSubtitulo, pnlGerenciarMotorista"/>
			</div>			

			<p:separator/>

			<p:outputPanel id="pnlGerenciarMotorista">

				<p:outputPanel rendered="#{gerenciarMotoristaBack.emModoDeCadastro}">
					<h:form id="frmGerenciarMotorista">
					
						<div class="ui-g ui-fluid ui-flat">

							<div class="ui-g-5 ui-sm-5">
								<div class="ui-g-12">
									<p:outputLabel for="edtNome" value="Nome Completo*"/>
								</div>
								<div class="ui-g-12">
									<p:inputText id="edtNome" value="#{gerenciarMotoristaBack.motorista.nome}"/>
								</div>
							</div>
							
						</div>

                        <p:spacer height="20px"/>

						<div class="text-right">
							<p:commandButton value="Salvar" icon="fa fa-save" styleClass="btn-success btn-sm"
									actionListener="#{gerenciarMotoristaBack.salvar()}" update="frmGerenciarMotorista"/>
						</div>

					</h:form>
				</p:outputPanel>

				<p:outputPanel rendered="#{not gerenciarMotoristaBack.emModoDeCadastro}">
					
					<h:form>						
						<div class="ui-g ui-fluid ui-flat" style="margin: auto; width: 70%">
                    		<div class="ui-g-12 ui-sm-12">
                    			<div class="ui-g-12">
									<p:outputLabel for="edtParamMotorista" value="Nome do Motorista"/>
								</div>
                        		<div class="ui-g-12 ui-inputgroup">
                            		<p:inputText id="edtParamMotorista" placeholder="Digite o nome do motorista"
                            				value="#{gerenciarMotoristaBack.paramNome}"/>
                            		<p:commandButton styleClass="btn-primary" icon="fa fa-filter" value="Listar"
                            				actionListener="#{gerenciarMotoristaBack.pesquisar()}" update="dtMotoristas"/>
                        		</div>
                    		</div>
                    	</div>
                    	
                    	<p:dataTable var="motorista" value="#{gerenciarMotoristaBack.motoristas}" rows="10" 
								paginatorPosition="bottom" paginator="true" id="dtMotoristas"
								emptyMessage="Nenhum motorista foi listado"
								paginatorTemplate="{FirstPageLink} {PreviousPageLink} 
								                   {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">
						
							<f:facet name="header">Motoristas Cadastrados</f:facet>
						
						    <p:column headerText="Matricula" style="width:10%; text-align: center;">
						        <h:outputText value="#{motorista.matricula}"/>
						    </p:column>
						 
						    <p:column headerText="Nome" style="text-align: left;">
						        <h:outputText value="{motorista.nome}"/>
						    </p:column>
						    
						    <p:column headerText="Categoria" style="width:20%; text-align: left;">
						        <h:outputText value="#{motorista.categoriaCarteira}"/>
						    </p:column>						    
						    
						    <p:column headerText="Ações" style="width:10%; text-align: center;">
						        <p:commandButton icon="fa fa-edit" styleClass="btn-warning btn-xs"
						        		actionListener="#{gerenciarMotoristaBack.colocarEmModoDeEdicao(motorista)}"
						        		update="pnlGerenciarMotorista" title="Editar"/>
						        <p:commandButton icon="fa fa-trash" styleClass="btn-fatal btn-xs"
						        		actionListener="#{gerenciarMotoristaBack.remover(motorista)}"
						        		update="pnlGerenciarMotorista" title="Remover">
						        	<p:confirm header="Confirmação" icon="ui-icon-alert"
						        			message="Tem certeza que deseja remover?"/>	
						       	</p:commandButton>

						    </p:column>
						    
						</p:dataTable>
						
						<ui:include src="/WEB-INF/template/confirmDialog.xhtml"/>
                    	
					</h:form>

				</p:outputPanel>

			</p:outputPanel>

        </p:panel>

    </ui:define>

</ui:composition>